# Time to leave the Louvre

## summary

* 元胞自动机
* 图的构建
* 迪杰斯特拉
* 危险系数
* 出口排队
* 场馆数据获取
* 得到最优的路径
* 得到一个适应各种灾难场景，各种建筑的模型
	



## 数据

capacity：过道（楼梯）宽度*过道（楼梯）长度：可以以人为单位

每个展厅的capacity，**日常人流量**，最好能虚拟出一个当前该展厅的人数（可能有技术进行检测否？）

发生特殊情况的地点的危险因数（这个需要列公式）



## introduction

恐怖袭击经常发生啊，卢浮宫很重要啊，一堆人去啊，游客不听话啊，尽管恐怖袭击经常发生，也没有很好的逃生指导（还是什么来着，那个新闻，反正安保措施不到位）

我们用su画图，用python模拟了发生紧急情况的时候的情况，得到正文所述结果。



## 元宝鸡（CA）元胞机

以人为元胞机，但具体元胞机是啥，怎么用，怎么理解，需要balabala瞎扯一点（可用来凑字数）

## 危险系数的计算

### 危险度

各个顶点的危险度应该与距离危险发生位置的距离成反比，因为距离越远越安全。
$$
\sigma(当前位置到危险源的距离)
$$


* 为什么用$\sigma$（为了在0-1之间）或者Relu也行
* 这样做的好处，尽可能的避开危险源，因为火势可能蔓延，恐怖分子可能移动，所以离危险源越远越安全。

### 危险系数

从当前位置到出口的危险系数应该是途经的各个顶点的危险程度的sum，即
$$
\lambda_{jk}=\sum_{i=j}^{k}{\lambda_{vi}}
$$

### 危险源的确定

* 危险源是实时更新的


## 迪杰斯特拉算法

单源最短路径，根据图论得到离这个人最近的出口，这个最近的标准结合了距离、容量是否可承载以及尽量离危险地带远。

### 图的构建

卢浮宫内各个场馆和路径抽象成图，每个场馆是一个点vertex，场馆之间的路径是边edge，每个边存在一个权重weight用来描述长度。

因为卢浮宫的楼梯都是双向的，不存在单向的楼梯。reference

因此，这是一个无向带权多路径的图。用邻接表进行存储。（重要）

一共有。。。个顶点。。。条边

#### 卢浮宫展馆的图图（超级好看的图图）

这个图一定要放在一个最美好的位置

用sketchup原比例制作卢浮宫模型，balabala

数字代表展厅，星星代表楼梯

摆出图来镇楼

### 距离

人工标注啊，人工标注

通过google map中的卢浮宫地图按比例尺计算出各个场馆之间的、场馆和电梯之间的距离，将其作为edge的weight。

- 楼梯的长度$L=\sqrt{2}height$
- height是两层楼之间的高度差



## 最快疏散

最快的疏散应该是找到一条最佳的疏散路径引用逃生速度的文献（但是是中文的，需要从中文文献中提取英文文献，或者自己把它算一遍，个人认为后者没必要）

。且能使用户以最安全、最迅速的方式离开危险地域，离开卢浮宫。而最佳疏散方案应该综合考虑当前位置与出口的距离以及该路径的安全程度。引用：Taniguchie E． ，Shimamoto H． Intelligent Transportation System Based on Dynamic Vehicle Routing and Scheduling with Variable Travel Times［J］． Transportation Research Part C，2004，( 12) :
235-250．

综合危险系数和到出口的距离，决定了人的行走方向，设置一个奖励值S（公式还需要斟酌）
$$
S=\alpha*危险系数/\beta*到门口的距离\\
或者\\
s=\alpha*危险系数+\beta*到出口的距离
$$

奖励值S越大，路径越优。

## 门口要排队

因为只考虑了安全和路径，所以可能会存在大量人流都往一个门走的情况。尤其是在放置重要展品的展馆，比如蒙娜丽莎的微笑。

幸运的是，现在有一个app叫affluences可以实时监测门口的排队情况，给出剩余时间T。

我们需要将T加入模型，奖励值进行更改
$$
S^{'}=\alpha*危险系数+\beta*距离+\gamma*T
$$
（当然这个函数也可以找到更好的想法）

## 敏感性分析（非常重要，我们拿不拿O奖就看这个了）

$$
\alpha,\beta,\gamma的取值对结果的影响
$$

得到一个最优解，最优解的评判条件是逃出的人最多。

## 优缺点分析

### advantage

1. 考虑全面，考虑了距离、安全、排队时间
2. 适应范围广，灾难情况和场景
3. 。。。

### disadvantage

1. 自动扶梯不安全
2. 。。。





## special case

* 展厅的游客分布不平均，尤其是镇馆三宝的展馆，会有非常多的人，并且可能有门，会卡门
* 那些个只有博物馆知道的小门，从那里出会有安全问题，要不要考虑
* 恐怖袭击的袭击者移动很快速，需要模拟被摧毁的节点的更新
* 存在恐怖袭击的地点的疏散？会不会被歹徒堵门
* 主入口比较大，可能要考虑出口的大小
* 会有踩踏事件
* 会有不听话的乱跑
* 会有残疾人，聋哑人，不知道该往哪里跑
* 还有进入大楼的救援人员，要留出安全通道
* 个人心理因素
* 从众心理
* 障碍物与墙的影响






